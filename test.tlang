

def urlparse(url, scheme, allow_fragments) {
    (url, scheme, _coerce_result) = _coerce_args(url, scheme)
    splitresult = urlsplit(url, scheme, allow_fragments)
    (scheme, netloc, url, query, fragment) = splitresult
    if (uses_params.contains(scheme) && url.contains(";")) {
        (url, params) = _splitparams(url)
    } else {
        params = ""
    }
    result = ParseResult(scheme, netloc, url, params, query, fragment)
    return _coerce_result(result)
}
